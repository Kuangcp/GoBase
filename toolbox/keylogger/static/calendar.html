<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Calendar</title>

    <script src="/static/js/lib/jquery.min.js"></script>
    <script src="/static/js/lib/echarts.min.js"></script>

    <script src="/static/js/chart.js"></script>
</head>

<style>
    .calendar-map {
        width: 100%;
        height: 1200px;
    }

    body {
        background-color: #686868;
    }
</style>

<body>

<div id="calendarMap" class="calendar-map"></div>

<script>

    function getVirtualData(year) {
        year = year || '2017';
        var date = +echarts.number.parseDate(year + '-01-01');
        var end = +echarts.number.parseDate((+year + 1) + '-01-01');
        var dayTime = 3600 * 24 * 1000;
        var data = [];
        for (var time = date; time < end; time += dayTime) {
            data.push([
                echarts.format.formatTime('yyyy-MM-dd', time),
                (Math.floor(Math.random() * 1000) + '')
            ]);
        }
        console.log(data)
        return data;
    }


    option = {
        tooltip: {
            position: 'top',
            formatter: function (p) {
                var format = echarts.format.formatTime('yyyy-MM-dd', p.data[0]);
                return format + ': ' + p.data[1];
            }
        },
        visualMap: {
            min: 0,
            max: 1000,
            calculable: true,
            orient: 'vertical',
            left: '670',
            top: 'center'
        },

        calendar: [{
            orient: 'vertical',
            range: '2015',
            cellSize: [20, 'auto'],
        },
            {
                left: 300,
                orient: 'vertical',
                range: '2016',
                cellSize: [20, 'auto'],
            },
            {
                left: 520,
                cellSize: [20, 'auto'],
                bottom: 10,
                orient: 'vertical',
                range: '2017',
                dayLabel: {
                    margin: 5
                }
            }],

        series: [{
            type: 'heatmap',
            coordinateSystem: 'calendar',
            calendarIndex: 0,
            data: getVirtualData(2015)
        }, {
            type: 'heatmap',
            coordinateSystem: 'calendar',
            calendarIndex: 1,
            data: getVirtualData(2016)
        }, {
            type: 'heatmap',
            coordinateSystem: 'calendar',
            calendarIndex: 2,
            data: getVirtualData(2017)
        }]
    };

    let chart = echarts.init(document.getElementById('calendarMap'));

    chart.setOption(option)
    handleGet('/calendarMap', function (data) {
        console.log(data)
    })
</script>
</body>
</html>